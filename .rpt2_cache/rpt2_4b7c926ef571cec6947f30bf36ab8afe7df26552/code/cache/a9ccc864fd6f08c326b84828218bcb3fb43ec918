{"code":"import { Factory } from '../Factory';\r\nimport { Node } from '../Node';\r\nimport { RGBComponent } from '../Validators';\r\n/**\r\n * RGB Filter\r\n * @function\r\n * @name RGB\r\n * @memberof Konva.Filters\r\n * @param {Object} imageData\r\n * @author ippo615\r\n * @example\r\n * node.cache();\r\n * node.filters([Konva.Filters.RGB]);\r\n * node.blue(120);\r\n * node.green(200);\r\n */\r\nexport var RGB = function (imageData) {\r\n    var data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue(), i, brightness;\r\n    for (i = 0; i < nPixels; i += 4) {\r\n        brightness =\r\n            (0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2]) / 255;\r\n        data[i] = brightness * red; // r\r\n        data[i + 1] = brightness * green; // g\r\n        data[i + 2] = brightness * blue; // b\r\n        data[i + 3] = data[i + 3]; // alpha\r\n    }\r\n};\r\nFactory.addGetterSetter(Node, 'red', 0, function (val) {\r\n    this._filterUpToDate = false;\r\n    if (val > 255) {\r\n        return 255;\r\n    }\r\n    else if (val < 0) {\r\n        return 0;\r\n    }\r\n    else {\r\n        return Math.round(val);\r\n    }\r\n});\r\n/**\r\n * get/set filter red value. Use with {@link Konva.Filters.RGB} filter.\r\n * @name red\r\n * @method\r\n * @memberof Konva.Node.prototype\r\n * @param {Integer} red value between 0 and 255\r\n * @returns {Integer}\r\n */\r\nFactory.addGetterSetter(Node, 'green', 0, function (val) {\r\n    this._filterUpToDate = false;\r\n    if (val > 255) {\r\n        return 255;\r\n    }\r\n    else if (val < 0) {\r\n        return 0;\r\n    }\r\n    else {\r\n        return Math.round(val);\r\n    }\r\n});\r\n/**\r\n * get/set filter green value. Use with {@link Konva.Filters.RGB} filter.\r\n * @name green\r\n * @method\r\n * @memberof Konva.Node.prototype\r\n * @param {Integer} green value between 0 and 255\r\n * @returns {Integer}\r\n */\r\nFactory.addGetterSetter(Node, 'blue', 0, RGBComponent, Factory.afterSetFilter);\r\n/**\r\n * get/set filter blue value. Use with {@link Konva.Filters.RGB} filter.\r\n * @name blue\r\n * @method\r\n * @memberof Konva.Node.prototype\r\n * @param {Integer} blue value between 0 and 255\r\n * @returns {Integer}\r\n */\r\n"}
