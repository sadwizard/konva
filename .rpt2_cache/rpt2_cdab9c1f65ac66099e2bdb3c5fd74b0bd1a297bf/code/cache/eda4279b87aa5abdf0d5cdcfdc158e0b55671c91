{"code":"import { Factory } from '../Factory';\r\nimport { Node } from '../Node';\r\nimport { RGBComponent } from '../Validators';\r\n/**\r\n * RGBA Filter\r\n * @function\r\n * @name RGBA\r\n * @memberof Konva.Filters\r\n * @param {Object} imageData\r\n * @author codefo\r\n * @example\r\n * node.cache();\r\n * node.filters([Konva.Filters.RGBA]);\r\n * node.blue(120);\r\n * node.green(200);\r\n * node.alpha(0.3);\r\n */\r\nexport var RGBA = function (imageData) {\r\n    var data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue(), alpha = this.alpha(), i, ia;\r\n    for (i = 0; i < nPixels; i += 4) {\r\n        ia = 1 - alpha;\r\n        data[i] = red * alpha + data[i] * ia; // r\r\n        data[i + 1] = green * alpha + data[i + 1] * ia; // g\r\n        data[i + 2] = blue * alpha + data[i + 2] * ia; // b\r\n    }\r\n};\r\nFactory.addGetterSetter(Node, 'red', 0, function (val) {\r\n    this._filterUpToDate = false;\r\n    if (val > 255) {\r\n        return 255;\r\n    }\r\n    else if (val < 0) {\r\n        return 0;\r\n    }\r\n    else {\r\n        return Math.round(val);\r\n    }\r\n});\r\n/**\r\n * get/set filter red value. Use with {@link Konva.Filters.RGBA} filter.\r\n * @name red\r\n * @method\r\n * @memberof Konva.Node.prototype\r\n * @param {Integer} red value between 0 and 255\r\n * @returns {Integer}\r\n */\r\nFactory.addGetterSetter(Node, 'green', 0, function (val) {\r\n    this._filterUpToDate = false;\r\n    if (val > 255) {\r\n        return 255;\r\n    }\r\n    else if (val < 0) {\r\n        return 0;\r\n    }\r\n    else {\r\n        return Math.round(val);\r\n    }\r\n});\r\n/**\r\n * get/set filter green value. Use with {@link Konva.Filters.RGBA} filter.\r\n * @name green\r\n * @method\r\n * @memberof Konva.Node.prototype\r\n * @param {Integer} green value between 0 and 255\r\n * @returns {Integer}\r\n */\r\nFactory.addGetterSetter(Node, 'blue', 0, RGBComponent, Factory.afterSetFilter);\r\n/**\r\n * get/set filter blue value. Use with {@link Konva.Filters.RGBA} filter.\r\n * @name blue\r\n * @method\r\n * @memberof Konva.Node.prototype\r\n * @param {Integer} blue value between 0 and 255\r\n * @returns {Integer}\r\n */\r\nFactory.addGetterSetter(Node, 'alpha', 1, function (val) {\r\n    this._filterUpToDate = false;\r\n    if (val > 1) {\r\n        return 1;\r\n    }\r\n    else if (val < 0) {\r\n        return 0;\r\n    }\r\n    else {\r\n        return val;\r\n    }\r\n});\r\n/**\r\n * get/set filter alpha value. Use with {@link Konva.Filters.RGBA} filter.\r\n * @name alpha\r\n * @method\r\n * @memberof Konva.Node.prototype\r\n * @param {Float} alpha value between 0 and 1\r\n * @returns {Float}\r\n */\r\n"}
