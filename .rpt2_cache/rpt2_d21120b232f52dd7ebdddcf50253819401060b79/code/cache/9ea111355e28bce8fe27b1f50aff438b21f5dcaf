{"code":"import { Factory } from '../Factory';\r\nimport { Node } from '../Node';\r\nimport { getNumberValidator } from '../Validators';\r\n/**\r\n * Contrast Filter.\r\n * @function\r\n * @memberof Konva.Filters\r\n * @param {Object} imageData\r\n * @example\r\n * node.cache();\r\n * node.filters([Konva.Filters.Contrast]);\r\n * node.contrast(10);\r\n */\r\nexport var Contrast = function (imageData) {\r\n    var adjust = Math.pow((this.contrast() + 100) / 100, 2);\r\n    var data = imageData.data, nPixels = data.length, red = 150, green = 150, blue = 150, i;\r\n    for (i = 0; i < nPixels; i += 4) {\r\n        red = data[i];\r\n        green = data[i + 1];\r\n        blue = data[i + 2];\r\n        //Red channel\r\n        red /= 255;\r\n        red -= 0.5;\r\n        red *= adjust;\r\n        red += 0.5;\r\n        red *= 255;\r\n        //Green channel\r\n        green /= 255;\r\n        green -= 0.5;\r\n        green *= adjust;\r\n        green += 0.5;\r\n        green *= 255;\r\n        //Blue channel\r\n        blue /= 255;\r\n        blue -= 0.5;\r\n        blue *= adjust;\r\n        blue += 0.5;\r\n        blue *= 255;\r\n        red = red < 0 ? 0 : red > 255 ? 255 : red;\r\n        green = green < 0 ? 0 : green > 255 ? 255 : green;\r\n        blue = blue < 0 ? 0 : blue > 255 ? 255 : blue;\r\n        data[i] = red;\r\n        data[i + 1] = green;\r\n        data[i + 2] = blue;\r\n    }\r\n};\r\n/**\r\n * get/set filter contrast.  The contrast is a number between -100 and 100.\r\n * Use with {@link Konva.Filters.Contrast} filter.\r\n * @name Konva.Node#contrast\r\n * @method\r\n * @param {Number} contrast value between -100 and 100\r\n * @returns {Number}\r\n */\r\nFactory.addGetterSetter(Node, 'contrast', 0, getNumberValidator(), Factory.afterSetFilter);\r\n"}
